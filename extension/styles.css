/* Velocitas Modern Theme for Gmail - Updated for Improved Headers */

/* Apply styles only when the modern theme is active */
body.velocitas-modern-theme {
  /* Next.js-inspired Font Stack */
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
  background-color: #FFFFE0 !important; /* Light Yellow background */
  color: #333333 !important; /* Default text color */
}

/* --- Original Hide Rules (Scoped) --- */
/* These rules will only apply when the theme is enabled */

body.velocitas-modern-theme a[aria-label="Support"] {
    display: none !important;
}

body.velocitas-modern-theme a[aria-label="Settings"] {
    display: none !important;
}

body.velocitas-modern-theme .bAw.bcf.tRcrsc { /* Side panel (Calendar, Keep, Tasks) */
    display: none !important;
}

body.velocitas-modern-theme .brC-aT5-aOt-Jw { /* Side panel container */
    display: none !important;
}

/* Consider if you want to hide the main navigation or restyle it.
   For a "Next.js vibe", often navigation is minimalist but present.
   If you want to see it, comment out these lines. */
body.velocitas-modern-theme .aeN.WR.baA.nH.oy8Mbf.bhZ { /* Left sidebar/navigation panel */
    display: none !important;
}

body.velocitas-modern-theme div[role="navigation"].aeN { /* Left navigation container */
    display: none !important;
}

body.velocitas-modern-theme div[id=":4"].aeH, /* Email toolbar */
body.velocitas-modern-theme .aeH .D.E.G-atb, /* Email toolbar container */
body.velocitas-modern-theme .nH.aqK /* Email management toolbar */ {
    display: none !important;
}

body.velocitas-modern-theme .gb_J.gb_dd.gb_0, /* Google apps menu (9-dot grid) */
body.velocitas-modern-theme a[aria-label="Google apps"] {
    display: none !important;
}

body.velocitas-modern-theme .gb_Lc, /* Hamburger menu */
body.velocitas-modern-theme div[aria-label="Main menu"] {
    display: none !important;
}

/* Search bar - consider restyling instead of hiding for a modern UI */
body.velocitas-modern-theme .gb_xe, /* Hide search bar container */
body.velocitas-modern-theme form[role="search"],
body.velocitas-modern-theme .gb_jd.gb_bf.bas.aJf {
    display: none !important;
}

/* --- Modern Look & Feel --- */

/* Style the main content area where emails are listed and read */
body.velocitas-modern-theme .nH.bkK, /* Main email list view */
body.velocitas-modern-theme .nH.bkL { /* Main email reading pane view */
  background-color: #ffffff !important; /* White content background */
  border-radius: 8px !important;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05) !important;
  margin: 16px !important; /* Add some margin around the main content */
  padding: 0 !important; /* Reset padding if overriding a container */
}

/* Email Row Styling */
body.velocitas-modern-theme .zA { /* Individual email row */
  border-bottom: 1px solid #FFFACD !important; /* Lighter yellow border */
  padding: 12px 18px !important;
  position: relative !important; /* Ensure proper stacking context */
  z-index: 2 !important; /* Higher than headers */
}
body.velocitas-modern-theme .zA:hover {
  background-color: #FFF9C4 !important; /* Light yellow hover */
  z-index: 3 !important; /* Even higher on hover */
}
body.velocitas-modern-theme .zA.PE { /* Selected email row */
  background-color: #FFEECA !important; /* Brighter valid yellow for selection */
  box-shadow: inset 3px 0 0 #FFD700 !important; /* Gold accent for selection */
  z-index: 3 !important; /* Ensure selection is visible */
}

/* Typography in email rows */
body.velocitas-modern-theme .yO, /* Sender */
body.velocitas-modern-theme .zF { /* Subject/Snippet */
  font-size: 14px !important;
}
body.velocitas-modern-theme .yO {
  font-weight: 600 !important;
  color: #2c3e50 !important;
}
body.velocitas-modern-theme .xS { /* Snippet text */
    color: #555 !important;
}

/* Modernize Compose Button (if it becomes visible or you re-enable parts of toolbar) */
body.velocitas-modern-theme div[gh="cm"] { /* Common selector for Compose button */
  background-color: #FFD700 !important; /* Gold */
  color: #333333 !important; /* Dark text for contrast */
  border-radius: 20px !important;
  padding: 10px 20px !important;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1) !important;
  transition: background-color 0.2s ease !important;
}
body.velocitas-modern-theme div[gh="cm"]:hover {
  background-color: #FFC107 !important; /* Darker Gold/Amber */
}

/* --- Icon Overrides (Illustrative Examples) --- */
/* Replacing icons requires specific selectors and SVG/font icons.
   These are generic examples. You'll need to find the actual selectors for Gmail's icons. */

/* Example: Try to style a generic icon button (e.g., if one was for 'refresh')
   This selector is a guess for an icon that might be in a toolbar.
*/
body.velocitas-modern-theme .asa[aria-label="Refresh"] .ar6 {
  font-size: 0 !important; /* Hide existing icon if it's a font icon */
}
body.velocitas-modern-theme .asa[aria-label="Refresh"] .ar6::before {
  content: '';
  display: inline-block;
  width: 20px;
  height: 20px;
  background-color: #555; /* New icon color - adjust if needed for yellow theme */
  -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>');
  mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>');
  background-repeat: no-repeat;
  background-size: contain;
}

/* Example: Style a generic "more options" (three dots) icon
   Again, '.some-icon-wrapper .actual-icon-element' is a placeholder for real selectors.
*/
body.velocitas-modern-theme .some-icon-wrapper::before {
  content: '';
  display: inline-block;
  width: 20px;
  height: 20px;
  background-color: #555; /* New icon color - adjust if needed for yellow theme */
  -webkit-mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>');
  mask-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>');
  background-repeat: no-repeat;
  background-size: contain;
  vertical-align: middle;
}

/* Remove default Gmail borders from some toolbars if they are made visible and restyled */
body.velocitas-modern-theme .D.G-atb, body.velocitas-modern-theme .Di {
    border: none !important;
}

/* Style for buttons in general, if any are visible or made visible */
body.velocitas-modern-theme .J-at1-auR { /* Common class for buttons */
    background-color: #FFF9C4 !important; /* Light yellow */
    color: #333333 !important;
    border: 1px solid #FFEE58 !important; /* Yellow border */
    border-radius: 4px !important;
    padding: 6px 12px !important;
    box-shadow: none !important;
    transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out !important;
}
body.velocitas-modern-theme .J-at1-auR:hover {
    background-color: #FFEE58 !important; /* Brighter yellow */
    border-color: #FFD700 !important; /* Gold border */
}

/* Ensure high specificity if Gmail's own styles are overriding */
body.velocitas-modern-theme .nH.Hd[role="main"] {
    padding: 20px !important; /* Add padding to the main email content area */
}

/* ==========================================
   IMPROVED DATE GROUP HEADERS STYLES
   ========================================== */

/* Base styles for all date group headers */
body.velocitas-modern-theme .velocitas-date-group-header {
  /* Ensure headers don't interfere with email interactions */
  pointer-events: none !important;
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  
  /* Proper positioning in stacking context */
  position: relative !important;
  z-index: 1 !important; /* Lower than email rows */
  
  /* Smooth appearance */
  transition: all 0.2s ease-in-out !important;
}

/* Cell styling for date headers */
body.velocitas-modern-theme .velocitas-date-group-header td {
  background-color: #FFFACD !important; /* Light yellow background */
  color: #4A4A4A !important; /* Darker text for readability */
  padding: 10px 18px !important; /* Slightly more padding for better appearance */
  font-weight: 600 !important; /* Slightly bolder */
  font-size: 13px !important;
  font-family: inherit !important; /* Use the same font as the theme */
  
  /* Enhanced borders */
  border-top: 2px solid #FFE082 !important; /* Slightly thicker, more visible border */
  border-bottom: 1px solid #FFEE58 !important;
  border-left: none !important;
  border-right: none !important;
  
  /* Prevent any interaction */
  pointer-events: none !important;
  user-select: none !important;
  cursor: default !important;
  
  /* Consistent height and spacing */
  height: 36px !important;
  box-sizing: border-box !important;
  line-height: 1.4 !important;
  
  /* Subtle shadow for depth */
  box-shadow: 0 1px 3px rgba(255, 215, 0, 0.1) !important;
}

/* Hover effect for the section (not the header itself) */
body.velocitas-modern-theme .velocitas-date-group-header + .zA:hover ~ .velocitas-date-group-header td,
body.velocitas-modern-theme .zA:hover + .velocitas-date-group-header td {
  background-color: #FFF8DC !important; /* Slightly warmer yellow when nearby email is hovered */
}

/* Alternative overlay header styles (if using the overlay approach) */
body.velocitas-modern-theme .velocitas-date-group-header-overlay {
  background: linear-gradient(135deg, #FFFACD 0%, #FFF8DC 100%) !important; /* Subtle gradient */
  color: #4A4A4A !important;
  padding: 10px 18px !important;
  font-weight: 600 !important;
  font-size: 13px !important;
  font-family: inherit !important;
  
  /* Enhanced borders and shadow */
  border-top: 2px solid #FFE082 !important;
  border-bottom: 1px solid #FFEE58 !important;
  box-shadow: 0 2px 4px rgba(255, 215, 0, 0.15) !important;
  
  /* Prevent interaction */
  pointer-events: none !important;
  user-select: none !important;
  cursor: default !important;
  
  /* Smooth transitions */
  transition: all 0.2s ease-in-out !important;
  
  /* Typography improvements */
  line-height: 1.4 !important;
  letter-spacing: 0.3px !important;
}

/* Ensure headers work well with Gmail's dynamic loading */
body.velocitas-modern-theme .velocitas-date-group-header,
body.velocitas-modern-theme .velocitas-date-group-header-overlay {
  /* Prevent Gmail from treating these as interactive elements */
  -webkit-touch-callout: none !important;
  -webkit-user-select: none !important;
  -khtml-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
  
  /* Ensure they don't interfere with Gmail's event handling */
  pointer-events: none !important;
}

/* Fix for any potential z-index conflicts */
body.velocitas-modern-theme .velocitas-date-group-header {
  isolation: isolate !important; /* Create new stacking context */
}

/* Responsive adjustments for smaller screens */
@media (max-width: 768px) {
  body.velocitas-modern-theme .velocitas-date-group-header td,
  body.velocitas-modern-theme .velocitas-date-group-header-overlay {
    padding: 8px 12px !important;
    font-size: 12px !important;
  }
}

/* Dark mode compatibility (if Gmail ever adds it or user forces it) */
@media (prefers-color-scheme: dark) {
  body.velocitas-modern-theme .velocitas-date-group-header td,
  body.velocitas-modern-theme .velocitas-date-group-header-overlay {
    background-color: #2A2A2A !important;
    color: #E0E0E0 !important;
    border-color: #444 !important;
  }
}

/* Animation for newly inserted headers */
@keyframes velocitas-header-appear {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

body.velocitas-modern-theme .velocitas-date-group-header:not(.velocitas-no-animation),
body.velocitas-modern-theme .velocitas-date-group-header-overlay:not(.velocitas-no-animation) {
  animation: velocitas-header-appear 0.3s ease-out !important;
}

/* Further fine-tuning will be needed by inspecting Gmail's live DOM */